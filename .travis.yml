language: node_js
node_js: stable
cache:
    apt: true
    directories:
        - node_modules
sudo: required
git:
    quiet: true
install:
    - sudo apt-get install -y sshpass
script:
    - pwd
    - ls -a
    - export K8S_VERSION="v1.15.3"
    - mkdir k8sdir && cd k8sdir
    - wget -c -q https://dl.k8s.io/${K8S_VERSION}/kubernetes-server-linux-amd64.tar.gz
    - wget -c -q https://dl.k8s.io/${K8S_VERSION}/kubernetes-client-linux-amd64.tar.gz
    - wget -c -q https://dl.k8s.io/${K8S_VERSION}/kubernetes-node-linux-arm64.tar.gz
    - ls -a
    - sha512sum kubernetes-server-linux-amd64.tar.gz 
    - sha512sum kubernetes-client-linux-amd64.tar.gz
    - sha512sum kubernetes-node-linux-arm64.tar.gz
    #- chmod +x *.sh
    #- ./get-kube.sh
    # 此处进行编译、构建等操作
    

after_script:
    # 此处进行部署等操作
    - echo "after script..."
    - echo "copying files to server"
    - sshpass -p ${PASSWD} scp -o StrictHostKeyChecking=no -r k8sdir ${USER}@${HOST}:/tmp/
    #- echo $?